<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Support technique</title>
  <style>
    body { font-family: sans-serif; display: flex; gap: 20px; padding: 20px; }
    iframe { flex: 2; border: none; height: 600px; }
    #side { flex: 1; display: flex; flex-direction: column; gap: 10px; }
    #chat { flex: 1; border: 1px solid #ccc; padding: 10px; overflow-y: auto; }
    #chat input { width: 100%; padding: 5px; }
  </style>
</head>
<body>

  <!-- Jitsi Meet intÃ©grÃ© -->
  <iframe id="jitsi-frame"
    src="https://meet.jit.si/SupportTech_Mecasonic"
    allow="camera; microphone; fullscreen; display-capture"
    width="100%">
  </iframe>

  <!-- Zone latÃ©rale -->
  <div id="side">
    <h2>Chat en direct</h2>
    <div id="chat">
      <div id="messages"></div>
      <input id="chatInput" placeholder="Ã‰cris un message..." />
    </div>

    <button id="screenshotBtn">ðŸ“¸ Prendre un screenshot</button>
    <a id="downloadLink" style="display:none" download="capture.png">TÃ©lÃ©charger lâ€™image</a>
  </div>

  <!-- Libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <!-- JS -->
  <script>
    // Mini chat local (pas en rÃ©seau ici)
    const input = document.getElementById("chatInput");
    const messages = document.getElementById("messages");
    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        const msg = document.createElement("div");
        msg.textContent = "ðŸ‘¤ Vous : " + input.value;
        messages.appendChild(msg);
        input.value = "";
        messages.scrollTop = messages.scrollHeight;
      }
    });

    // Screenshot du site
    document.getElementById("screenshotBtn").onclick = async () => {
      const canvas = await html2canvas(document.body);
      const dataUrl = canvas.toDataURL("image/png");

      const link = document.getElementById("downloadLink");
      link.href = dataUrl;
      link.style.display = "block";
      link.click();
    };
  </script>
</body>
</html>
